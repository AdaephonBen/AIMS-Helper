var helpAddSrchCount=0;var helpSelectedSrchArr=[];var mainFieldId="";function openHelpPopup(object){$("#"+object.id).addClass("validate");$("#"+object.id).siblings(".comboHlp").addClass("validate");$("#"+object.id).keyup(function(e){if(e.keyCode==13){$(this).siblings(".comboHlp").click();return false;
}}).focus(function(){$(this).parent(".comboHlpDiv").addClass("focussed");object.preValue=$.trim($("#"+object.id).val());}).blur(function(){$(this).parent(".comboHlpDiv").removeClass("focussed");object.value=$.trim($("#"+object.id).val());if(object.value!=""){callHelpSetValRequest(object);}else{$.each(object.focusObj,function(id,val){if(val.indexOf("#")==-1){$("#"+val).val("");
$("#"+val).attr("title","");}else{$(val).val("");$(val).attr("title","");}});if(typeof object.afterClear!="undefined"){eval(object.afterClear+"("+JSON.stringify(object)+");");}}}).siblings(".comboHlp").bind("click",function(){if(!popupInd||object.isDynamic){object.value=$.trim($("#"+object.id).val());
if(object.value==""){callHelpSetValRequest(object);}else{if(typeof object.beforeCallBack!="undefined"){var object1=eval(object.beforeCallBack+"("+JSON.stringify(object)+");");if(typeof object1=="object"){openPopupPage({"url":"/help/helpPopupRequest","object":{"object":JSON.stringify(object1),"closeMethod":"closeComboHelpPopup"},"width":900});
}else{if(object1){openPopupPage({"url":"/help/helpPopupRequest","object":{"object":JSON.stringify(object),"closeMethod":"closeComboHelpPopup"},"width":900});}else{return false;}}}else{openPopupPage({"url":"/help/helpPopupRequest","object":{"object":JSON.stringify(object),"closeMethod":"closeComboHelpPopup"},"width":900});
}}}});}function callHelpSetValRequest(object){if(typeof object.beforeCallBack!="undefined"){var object1=eval(object.beforeCallBack+"("+JSON.stringify(object)+");");if(typeof object1=="object"){callAjaxByObj({"url":"/help/helpSetValuesAjax","type":"POST","async":false,"data":{"object":JSON.stringify(object1)},"resp":afterHelpSetvalues(object.id,object.isDynamic)});
}else{if(object1){callAjaxByObj({"url":"/help/helpSetValuesAjax","type":"POST","async":false,"data":{"object":JSON.stringify(object)},"resp":afterHelpSetvalues(object.id,object.isDynamic)});}else{return false;}}}else{callAjaxByObj({"url":"/help/helpSetValuesAjax","type":"POST","async":false,"data":{"object":JSON.stringify(object)},"resp":afterHelpSetvalues(object.id,object.isDynamic)});
}}function afterHelpSetvalues(id,isDynamic){return function(response){if(response.uniqueInd){var comboObj={};for(var i in response.comboData.list){var comboItem=response.comboData.list[i];comboObj[comboItem.columnAlias]=comboItem.columnValue;var focusObj=$.parseJSON(response.focusObj);if(typeof focusObj!="undefined"){$.each(focusObj,function(id,val){if(id.toLowerCase()==comboItem.columnAlias){if(val.indexOf("#")==-1){$("#"+val).val(comboItem.columnValue);
}else{$(val).val(comboItem.columnValue);}}});}}if(typeof response.afterCallBack!="undefined"){eval(response.afterCallBack+"("+JSON.stringify(comboObj)+", '"+id+"');");}}else{if(!popupInd||isDynamic){openPopupPage({"url":"/help/helpPopupRequest","object":{"object":response.request,"closeMethod":"closeComboHelpPopup"},"width":900});
}}};}function showHelpProcessList(){$("input[type='submit'],input[type='button'], button, ul.comboDiv.comboData.gridHelpContent li.helpLi").attr("disabled","disabled").css("opacity","0.5");$(".popupPagination").css("visibility","hidden");$(".comboMainDiv").append('<span class="loadngImgSml">&nbsp;</span>');
$(".loadngImgSml").css({"left":$(".comboMainDiv").width()/2,"position":"absolute","top":($("ul.comboDiv.comboData.gridHelpContent").position().top)+($("ul.comboDiv.comboData.gridHelpContent").height()/2)});$(".loadngImgSml").show();}function hideHelpProcessList(){$("input[type='submit'],input[type='button'], button, ul.comboDiv.comboData.gridHelpContent li.helpLi").removeAttr("disabled").css("opacity","1");
$(".popupPagination").css("visibility","visible");$(".loadngImgSml").remove();}function loadDefaultProcessForHelp(){checkIfDatePickerRequired();if(typeof apFormValidateTypes=="undefined"){head.load(versionPath+"/js/common/form-validator.js");}}function addNewSrchDiv(){var A=$("#helpSrchDiv .comboSrchDiv:first").clone().appendTo("#helpSrchDiv");
if(($("#helpSrchDiv").children(".comboSrchDiv").length>3)||($("#helpBtnDiv").children(".comboSrchDiv").length>3)){$(".helpFldSrchDiv").css({"overflow-y":"auto","height":"100px"});}else{$(".helpFldSrchDiv").css({"overflow-y":"hidden","height":"auto"});}var B="";B+='<div class="fldComponent" style="margin-top: 5px;">';
B+='	<span onclick="removeSrchDiv(this);" class="delete_row_icon helpAddIcon"></span>';B+="</div>";A.append(B);A.after($("#helpAddIconDiv").detach());helpAddSrchCount++;A.children(".dateSrchDiv").children(".fldComponent").children("#fromComboDate").attr("id","fromComboDate_"+helpAddSrchCount).removeClass("hasDatepicker").val("");
A.children(".dateSrchDiv").children(".fldComponent").children("#toComboDate").attr("id","toComboDate_"+helpAddSrchCount).removeClass("hasDatepicker").val("");A.children(".fldSrchDiv").children(".fldComponent").children(".comboSrchTxt").attr("id","comboSearchTxt"+helpAddSrchCount).removeClass("hasDatepicker").val("");
checkIfDatePickerRequired();A.children(".dateSrchDiv").hide();A.children(".fldSrchDiv").show();$(".helpFldSrchDiv").scrollTop($(".helpFldSrchDiv")[0].scrollHeight);}function removeSrchDiv(A){$(A).parents(".comboSrchDiv").fadeOut("slow",function(){if($(this).is(":last-child")){$(this).prev().after($("#helpAddIconDiv").detach());
}$(this).remove();if(($("#helpSrchDiv").children(".comboSrchDiv").length<=3)&&($("#helpBtnDiv").children(".comboSrchDiv").length<=3)){$(".helpFldSrchDiv").css({"overflow-y":"hidden","height":"auto"});}});}function addNewOrderDiv(){var A=$("#helpBtnDiv .comboSrchDiv:first").clone().appendTo("#helpBtnDiv");
if(($("#helpSrchDiv").children(".comboSrchDiv").length>3)||($("#helpBtnDiv").children(".comboSrchDiv").length>3)){$(".helpFldSrchDiv").css({"overflow-y":"auto","height":"100px"});}else{$(".helpFldSrchDiv").css({"overflow-y":"hidden","height":"auto"});}var B="";B+='<div class="fldComponent" style="margin-top: 5px;">';
B+='	<span onclick="removeOrderDiv(this);" class="delete_row_icon helpAddIcon"></span>';B+="</div>";A.append(B);A.after($("#helpOrderAddIconDiv").detach());A.children(".comboOrderDiv").hide();$(".helpFldSrchDiv").scrollTop($(".helpFldSrchDiv")[0].scrollHeight);}function removeOrderDiv(A){$(A).parents(".comboSrchDiv").fadeOut("slow",function(){if($(this).is(":last-child")){$(this).prev().after($("#helpOrderAddIconDiv").detach());
}$(this).remove();if(($("#helpSrchDiv").children(".comboSrchDiv").length<=3)&&($("#helpBtnDiv").children(".comboSrchDiv").length<=3)){$(".helpFldSrchDiv").css({"overflow-y":"hidden","height":"auto"});}});}function checkIfDatePickerRequired(){activeDatePicker();$("#helpSrchDiv .comboSrchDiv .fldSrchDiv .fldComponent .hasDatePicker").each(function(){var B=$(this).parents(".fldSrchDiv").siblings(".srchComboDiv").children(".comboSrchBy");
var A=$("option:selected",B).attr("dataType");if(A!=popHelpDtVal&&A!=popHelpTSVal){$(this).datepicker("destroy");}});$("#helpSrchDiv .comboSrchDiv .dateSrchDiv .fldComponent .hasDatePicker").each(function(){var B=$(this).parents(".dateSrchDiv").siblings(".srchComboDiv").children(".comboSrchBy");var A=$("option:selected",B).attr("dataType");
if(A!=popHelpDtVal&&A!=popHelpTSVal){$(this).datepicker("destroy");}});}function isMultiOperable(A){if(A==popHelpDtVal||A==popHelpTSVal||A==popHelpIntVal||A==popHelpFltVal||A==popHelpDblVal){return true;}return false;}function isComboHelpValueExisted(clearFields){return function(response){if(!response.exists){for(var i in clearFields){$(clearFields[i]).val("");
}}isHelpPopupOpen=false;closePopup();if(typeof afterPopupClose!="undefined"){eval(afterPopupClose+"('"+mainFieldId+"');");}$("#"+mainFieldId).focus();};}function closeComboHelpPopup(){if(typeof comboObj=="undefined"){isHelpPopupOpen=false;closePopup();return false;}var clearFields=comboObj.clearFields;
var checkFields=comboObj.checkFields;if(typeof clearFields!="undefined"){var mainReqObj={};var clearFieldInputData={};var checkFieldInputData={};mainReqObj.key=key;mainReqObj.appKey=appKey;mainReqObj.subKey=subKey;clearFieldInputData.id=encodeData($("#"+comboObj.id).val());$.each(clearFields,function(id,val){clearFieldInputData[id]=encodeData($(val).val());
});mainReqObj.clearFields=clearFieldInputData;if(typeof checkFields!="undefined"){$.each(checkFields,function(id,val){checkFieldInputData[id]=encodeData($(val).val());});mainReqObj.checkFields=checkFieldInputData;}mainReqObj.extraParams=comboObj.extraParams;callAjaxByObj({"url":"/help/checkHelpValuesAjax","type":"POST","async":false,"data":"object="+JSON.stringify(mainReqObj),"resp":isComboHelpValueExisted(clearFields)});
}else{if(typeof afterPopupCallback!="undefined"){eval(afterPopupCallback+"("+undefined+", '"+mainFieldId+"');");}isHelpPopupOpen=false;closePopup();$("#"+comboObj.id).focus();}}function onComboValueSelected(thisObj){if($(thisObj).attr("disabled")!="disabled"){if(multiHlpPopInd){checkToggleHlpRow($(thisObj));
}else{var attrObj=comboObj.focusObj;if(typeof attrObj!="undefined"){attrObj=eval(attrObj);$.each(attrObj,function(val,id){if(id.indexOf("#")==-1){$("#"+id).val($.trim($(thisObj).children(".itemSpan[column="+val.toLowerCase()+"]").text()));}else{$(id).val($.trim($(thisObj).children(".itemSpan[column="+val.toLowerCase()+"]").text()));
}});}var selectedObj={};$(thisObj).children(".itemSpan").each(function(){selectedObj[$(this).attr("column")]=$.trim($(this).text());});gCloseBanner();isHelpPopupOpen=false;closePopup();if(typeof afterPopupCallback!="undefined"){eval(afterPopupCallback+"("+JSON.stringify(selectedObj)+", '"+mainFieldId+"');");
}$("#"+mainFieldId).focus();}}}function checkAllHlpRowsInPage(){$(".comboItem.helpLi").each(function(){var A=$(this).children(".checkHlpRow");if(A.hasClass("uncheckCheckBox")){checkHlpRow($(this),A);}});$("#popHlpSelCnt").text(helpSelectedSrchArr.length);}function uncheckAllHlpRowsInPage(){$(".comboItem.helpLi").each(function(){var A=$(this).children(".checkHlpRow");
if(!A.hasClass("uncheckCheckBox")){uncheckHlpRow($(this),A);}});$("#popHlpSelCnt").text(helpSelectedSrchArr.length);}function checkHlpRow(B,A){A.removeClass("uncheckCheckBox");A.addClass("checkCheckBox");B.addClass("hlpRowSelected");if($.inArray(B.attr("id"),helpSelectedSrchArr)==-1){helpSelectedSrchArr.push(B.attr("id"));
}}function uncheckHlpRow(B,A){A.removeClass("checkCheckBox");A.addClass("uncheckCheckBox");B.removeClass("hlpRowSelected");helpSelectedSrchArr.splice($.inArray(B.attr("id"),helpSelectedSrchArr),1);}function checkToggleHlpRow(B){var A=B.children(".checkHlpRow");if(A.hasClass("uncheckCheckBox")){checkHlpRow(B,A);
}else{uncheckHlpRow(B,A);}$("#popHlpSelCnt").text(helpSelectedSrchArr.length);}function doSelectedFunctionality(){for(var A in helpSelectedSrchArr){var C=$("#"+helpSelectedSrchArr[A]);var B=C.children(".checkHlpRow");if(B.hasClass("uncheckCheckBox")){checkHlpRow(C,B);}}$("#popHlpSelCnt").text(helpSelectedSrchArr.length);
}function clearHlpFormData(){ppno=1;$(".comboSrchBy").val("-1");$(".helpSrchOperator").val("1");$(".comboSrchTxt").val("");$(".comboOrderBy").val("-1");$(".popComboOrder").val("-1");$(".comboOrderDiv").hide();$(".fromComboDate").val("");$(".toComboDate").val("");$(".dateSrchDiv").hide();$(".fldSrchDiv").show();
}function clearHlpForm(){$(".helpAddIcon").each(function(){removeSrchDiv(this);removeOrderDiv(this);});}function onComboValuesSelected(){var selectedObjs=[];$(".comboItem.helpLi.hlpRowSelected").each(function(){var thisObj=$(this);var attrObj=comboObj.focusObj;if(typeof attrObj!="undefined"){attrObj=eval(attrObj);
$.each(attrObj,function(val,id){if(id.indexOf("#")==-1){$("#"+id).val($.trim(thisObj.children(".itemSpan[column="+val.toLowerCase()+"]").text()));}else{$(id).val($.trim(thisObj.children(".itemSpan[column="+val.toLowerCase()+"]").text()));}});}var selectedObj={};thisObj.children(".itemSpan").each(function(){selectedObj[$(this).attr("column")]=$.trim($(this).text());
});selectedObjs.push(selectedObj);});gCloseBanner();if(typeof afterPopupCallback!="undefined"){eval(afterPopupCallback+"("+JSON.stringify(selectedObjs)+", '"+JSON.stringify(helpSelectedSrchArr)+"', '"+mainFieldId+"');");}isHelpPopupOpen=false;closePopup();}function doHelpDownKeyFunctionality(){$("input:focus, select:focus").blur();
$("#helpSrchDiv").click().blur();if($("li.comboItem.helpLi.validate.selected").length==0){$("li.comboItem.helpLi.validate:first").addClass("selected").focus();doHelpKeyScrollFunctionality();}else{$("li.comboItem.helpLi.validate.selected").removeClass("selected").next().addClass("selected").focus();if($("li.comboItem.helpLi.validate.selected").length==0){if(ptotalItems>ppno*ppsize){ppno++;
loadHelpPageData({"setItem":"first"});}}else{doHelpKeyScrollFunctionality();}}}function doHelpUpKeyFunctionality(){$("input:focus, select:focus").blur();$("#helpSrchDiv").click().blur();if($("li.comboItem.helpLi.validate.selected").length==0){$("li.comboItem.helpLi.validate:first").addClass("selected").focus();
doHelpKeyScrollFunctionality();}else{$("li.comboItem.helpLi.validate.selected").removeClass("selected").prev().addClass("selected").focus();if($("li.comboItem.helpLi.validate.selected").length==0){if(ppno!=1){ppno--;loadHelpPageData({"setItem":"last"});}}else{doHelpKeyScrollFunctionality();}}}function doHelpKeyScrollFunctionality(){if($("li.comboItem.helpLi.validate.selected").length!=0){if($("li.comboItem.helpLi.validate.selected").offset().top<0){$(".comboDiv.comboData.gridHelpContent").animate({scrollTop:0},100);
}else{$(".comboDiv.comboData.gridHelpContent").animate({scrollTop:$("li.comboItem.helpLi.validate.selected").offset().top-$("li.comboItem.helpLi.validate:first").offset().top},100);}}}