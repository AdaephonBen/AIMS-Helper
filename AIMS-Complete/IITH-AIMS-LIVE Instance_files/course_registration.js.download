var totCount=0;var formCourseArr=[];$(document).ready(function(){$(".loadDegImg").show();setMaxLimit("comments","commentLimit");if(isStudent){disableAllButtons();callAjaxByObj({"url":"/courseReg/courseRegDetails/"+pId+"/"+regtS,"type":"GET","resp":afterLoadStdntCourseReg()});}$("#courseReg").on("click",".closeDegReg",function(){var A=$(this).data("degReg");
var B=$(this).data("degRegCnt");var C=$("#"+B+"_"+A+"_stdtReg");if($("#crV_"+B+"_"+A).val()==""&&$("#cRegId_"+B+"_"+A).val()==""){$("#"+B+"_"+A+"_stdtReg").remove();}else{C.fadeOut("slow",function(){C.addClass("dInd");});}});$("#courseReg").on("change",".chngElective",function(){var A=$(this).closest("div").attr("id");
var B=A.split("_")[0];var C=A.split("_")[1]+"_"+A.split("_")[2];changeOnElectiveOccurred($(this),B,C);});$("#courseReg").on("click",".note_icon",function(){var B=$(this).attr("id").split("_");if($("#cId_"+B[1]+"_"+B[2]+"_"+B[3]).val()==""){showErrorById("cCd_"+B[1]+"_"+B[2]+"_"+B[3],"Please select valid course to enter comment");
return false;}if($("#"+B[1]+"_"+B[2]+"_"+B[3]+"_stdtReg").hasClass("cNEdit")){var A={"confirmStr":$.trim($("#stCmnt_"+B[1]+"_"+B[2]+"_"+B[3]).val()),"ok":okCmtCallBack(),"cancelInd":false,"closeInd":false,"width":325};openConfirmPopup(A);}else{openCommentPopup($(this));$("#popupComment").focus();}});
$(document).on("keyup",'input[clr="clr"]',function(){var A=$(this).attr("id").split("_")[1];A=A+"_"+$(this).attr("id").split("_")[2];A=A+"_"+$(this).attr("id").split("_")[3];$("#cCd_"+A).attr("data-rcid","");enableTimeTable(A);});});function afterLoadStdntCourseReg(){return function(F){var C="";var B="";
var D="";var E="";if(typeof F!=="undefined"&&F.length>0){for(i in F){C="";degRegId=F[i].studentDegreeId+"_"+F[i].courseRegTypeId;if(!(degRegId in degRegCountIndv)){degRegCountIndv[degRegId]=0;}if(F[i].displayGroup!=null&&degRegCountIndv[degRegId]==0){C='<div class="formHeader">'+F[i].displayGroup+'</div><div class="clear"></div>';
}if(degRegCountIndv[degRegId]!=0&&(E!==F[i].displayGroup&&F[i].displayGroup!=null)){C='<div class="clear formHeader">'+F[i].displayGroup+'</div><div class="clear"></div>';}E=F[i].displayGroup;degRegCountIndv[degRegId]++;D=degRegCountIndv[degRegId];var A="";if(regtS==aSt||regtS==rSt||regtS==0){A={"degRegId":degRegId,"regTypeId":B,"degRegCount":D,"nameVariableFlag":F[i].nameVariableFlag,"crId":F[i].courseRegId,"combo":false};
}else{A={"degRegId":degRegId,"regTypeId":B,"degRegCount":D,"nameVariableFlag":F[i].nameVariableFlag,"rTrDtlId":F[i].regTrackDtlId,"crV":F[i].versionId,"crDt":F[i].courseRegDtStr,"combo":false};}C+=getCourseRegHtml(A);jQuery("#stdtRegDtls_"+degRegId).append(C);$(".cmbhlp_"+D+"_"+degRegId).remove();if(F[i].isRegEnded===1){$("#delete_"+D+"_"+degRegId).parent().hide();
}if(F[i].courseRegStatusId===parseInt(pdSt)){$("#"+D+"_"+degRegId+"_stdtReg").hide();$("#"+D+"_"+degRegId+"_stdtReg").addClass("dInd");}$("#courseElectiveType option").clone().appendTo("#eType_"+D+"_"+degRegId);$("#eType_"+D+"_"+degRegId).val(F[i].electiveTypeId);$("#eType_"+D+"_"+degRegId).attr("title",F[i].courseElectiveTypeDesc);
$("#cCd_"+D+"_"+degRegId).val(F[i].courseCd);$("#cCd_"+D+"_"+degRegId).attr("data-rcid",F[i].runningCourseId);$("#cCd_"+D+"_"+degRegId).attr("title",F[i].courseCd);$("#cId_"+D+"_"+degRegId).val(F[i].courseId);$("#courseSlotId_"+D+"_"+degRegId).val(F[i].courseSlotId);$("#cDesc_"+D+"_"+degRegId).val(F[i].courseName);
$("#cDesc_"+D+"_"+degRegId).attr("title",F[i].courseName);$("#vCourseName_"+D+"_"+degRegId).val(F[i].variableCourseName);$("#rcId_"+D+"_"+degRegId).val(F[i].runningCourseId);$("#crdId_"+D+"_"+degRegId).val(F[i].coordinatorId);$("#cCr_"+D+"_"+degRegId).val(F[i].instructorName);$("#cCr_"+D+"_"+degRegId).attr("title",F[i].instructorName);
$("#locId_"+D+"_"+degRegId).val(F[i].runningCourseId);$("#cLoc_"+D+"_"+degRegId).val(F[i].locationCd);$("#cLoc_"+D+"_"+degRegId).attr("title",F[i].locationCd);$("#cLoc_"+D+"_"+degRegId).addClass("displayNoneCls");$("#credits_"+D+"_"+degRegId).val(F[i].credits);$("#credits_"+D+"_"+degRegId).attr("title",F[i].credits);
$("#rcCrLoc_"+D+"_"+degRegId).val(F[i].runningCourseCoordLocId);$("#sType_"+D+"_"+degRegId).val(F[i].scoreTypeDesc);$("#sType_"+D+"_"+degRegId).attr("title",F[i].scoreTypeDesc);$("#sType_"+D+"_"+degRegId).addClass("displayNoneCls");$("#maxMarks_"+D+"_"+degRegId).val(F[i].maxScore);$("#maxMarks_"+D+"_"+degRegId).attr("title",F[i].maxScore);
$("#maxMarks_"+D+"_"+degRegId).addClass("displayNoneCls");$("#regStatus_"+D+"_"+degRegId).val(F[i].courseRegStatusCd);$("#regStatus_"+D+"_"+degRegId).attr("title",F[i].courseRegStatusCd);$("#regStatusVal_"+D+"_"+degRegId).val(F[i].courseRegStatusId);$("#isREnd_"+D+"_"+degRegId).val(F[i].isRegEnded);$("#stCmnt_"+D+"_"+degRegId).val(F[i].studentIndvComments);
if(F[i].nameVariableFlag==bYes){$("#nameVariableFlag_"+D+"_"+degRegId).val(F[i].nameVariableFlag);$("#varCName_"+D+"_"+degRegId).show();}if(F[i].studentIndvComments==""||F[i].studentIndvComments==null){$("#cmnt_"+D+"_"+degRegId).hide();}$("#"+D+"_"+degRegId+"_stdtReg").addClass("cNEdit");totCount++;$("#eType_"+D+"_"+degRegId).attr("disabled",true);
$("#cCd_"+D+"_"+degRegId).attr("readonly","readonly");$("#hlpD_"+D+"_"+degRegId).removeClass("preq");$("#cCd_"+D+"_"+degRegId).removeClass("preq");$("#cCd_"+D+"_"+degRegId).parent().css("background-color","#ECEAE9");$("#cCd_"+D+"_"+degRegId).css("background-color","#ECEAE9");$("#cCd_"+D+"_"+degRegId).css("width","70px");
$("#cCd_"+D+"_"+degRegId).css("background-color","#ECEAE9");$(".loadRegDtls_"+degRegId).hide();enableTimeTable(D+"_"+degRegId);}}$(".loadDegImg").hide();enableAllButtons();if(isSubmitted==="true"){$(".closeDegReg").parent().hide();}};}function UserException(A,B){this.message=A;this.focusOn=B;}$("#save").click(function(){return saveOrSubmitDetails($(this));
});$("#sbmt").click(function(){return saveOrSubmitDetails($(this));});function disableAllButtons(){$("#save").attr("disabled","disabled");$(".addNew").hide();$("#sbmt").attr("disabled","disabled");$("#cancel").attr("disabled","disabled");}function disableWithLoading(){disableAllButtons();$(".submitLoad").show();
}function enableAllButtons(){$("#save").removeAttr("disabled");$(".addNew").show();$("#sbmt").removeAttr("disabled");$("#cancel").removeAttr("disabled");$(".submitLoad").hide();}if(isStudent==="false"||isOnceAccepted==="true"||isSubmitted==="true"){disableAllButtons();}function addNewCourseRegDtls(E,D){var C=E+"_"+D;
if(!(C in degRegCountIndv)){degRegCountIndv[C]=0;}degRegCountIndv[C]++;var F=degRegCountIndv[C];var B="";var A={"degRegId":C,"regTypeId":D,"degRegCount":F};B=getCourseRegHtml(A);if($(".stdtDegReg_"+C).length==0){$(".stdtDegReg_"+C).remove();}$("#stdtRegDtls_"+C).append(B);$("#courseElectiveType option").clone().appendTo("#eType_"+F+"_"+C);
$("#stdtRegDtls_"+C).scrollTop($("#stdtRegDtls_"+C)[0].scrollHeight);generateCombo(F+"_"+C);$("#regStatus_"+F+"_"+C).attr("title",$("#regStatus_"+F+"_"+C).val());enableTimeTable(F+"_"+C);}function getCourseRegHtml(E){var H=E["degRegId"];var I=E["degRegCount"];var F="";var B="";var A="";var D="";var G=false;
if("rTrDtlId" in E){G=true;F=E["rTrDtlId"];}if("crId" in E){G=true;B=E["crId"];}if("crV" in E){A=E["crV"];}if("crDt" in E){D=E["crDt"];}var C="";C+='<div class="formRowBlock stdtDegReg_'+H+" stdtDegReg_"+I+"_"+H+' tab_body_bg"';C+='	id="'+I+"_"+H+'_stdtReg" data-is-ad="" style="border-bottom: 1px solid #EEE;padding:2px 0;">';
C+='<input type="hidden" name="stdntDeg_'+I+"_"+H+'" id="stdntDeg_'+I+"_"+H+'" value="'+H.split("_")[0]+'"/>';C+='<input type="hidden" name="stdntReg_'+I+"_"+H+'" id="stdntReg_'+I+"_"+H+'" value="'+H.split("_")[1]+'"/>';C+='<input type="hidden" id="cRegId_'+I+"_"+H+'" value="'+B+'"/>';C+='<input type="hidden" id="rTrDtlId_'+I+"_"+H+'" value="'+F+'"/>';
C+='<input type="hidden" id="crV_'+I+"_"+H+'" value="'+A+'"/>';C+='<input type="hidden" id="crDt_'+I+"_"+H+'" value="'+D+'"/>';C+='<span class="col1 row spanEleWidth" >';C+='<select name="eType_'+I+"_"+H+'" id="eType_'+I+"_"+H+'" class="selectListSm rightCombo chngElective colWidth preq" style="width: 140px;"></select>';
C+="</span>";C+='<span class="col2 row">';C+='<div class="comboHlpDiv preq" id="hlpD_'+I+"_"+H+'" style="width: 104px; margin-top:0px; float:left; display:inline-block;">';C+='<input type="text" id="cCd_'+I+"_"+H+'" class="comboTxt colWidth preq cCd" value="" style="width: 72px;" clr="clr"/>';C+='<span class="comboHlp cmbhlp_'+I+"_"+H+'" style="float: none; margin-left: 49px;"></span>';
C+="</div>";C+='<input type="hidden" id="courseSlotId_'+I+"_"+H+'" value=""/>';C+='<input type="hidden" id="cId_'+I+"_"+H+'" value=""/> ';C+='<span   class="time_tab_icon" id="timeTab_'+I+"_"+H+'" style="margin-top:0px; float:right; display:inline-block;" title="Click For Time Table"></span>';C+="</span>";
C+='<span class="col3 row">';C+='<input type="text" id="cDesc_'+I+"_"+H+'" class="rightDiv fld colWidth" value="" readOnly="readonly" style="width: 287px; margin-left:21px;"/>';C+='<input type="hidden" id="rcId_'+I+"_"+H+'" value=""/>';C+="</span>";C+='<span class="col4 row">';C+='<input type="text" id="cCr_'+I+"_"+H+'" class="rightDiv fld colWidth" value="" readOnly="readonly"  style="width: 138px; margin-left:16px;"/>';
C+='<input type="hidden" id="crdId_'+I+"_"+H+'" value=""/>';C+="</span>";C+='<span class="col5 row displayNoneCls">';C+='<input type="text" id="cLoc_'+I+"_"+H+'" class="rightDiv fld colWidth" value="" readOnly="readonly"/>';C+='<input type="hidden" id="locId_'+I+"_"+H+'" value=""/>';C+="</span>";C+='<span class="col6 row">';
C+='<input type="text" id="credits_'+I+"_"+H+'" class="rightDiv fld colWidth" value="" readOnly="readonly" style="margin-left:17px;" />';C+='<input type="hidden" id="cCrd_'+I+"_"+H+'" value=""/>';C+="</span>";C+='<span class="col11 row displayNoneCls">';C+='<input type="text" id="sType_'+I+"_"+H+'" class="rightDiv fld colWidth" value="" readOnly="readonly"/>';
C+="</span>";C+='<span class="col7 row displayNoneCls">';C+='<input type="text" id="maxMarks_'+I+"_"+H+'" class="rightDiv fld colWidth" value="" readOnly="readonly"/>';C+='<input type="hidden" id="rcCrLoc_'+I+"_"+H+'" value=""/>';C+="</span>";C+='<span class="col8 row">';C+='<input id="regStatus_'+I+"_"+H+'" class="rightDiv fld colWidth" value="Save" disabled="disabled" style="margin-left:20px;">';
C+='<input type="hidden" id="regStatusVal_'+I+"_"+H+'" value="'+sSt+'"/>';C+="</span>";C+='<span class="col10 row">';C+='<a style="width:20px; margin-left:20px;" id="cmnt_'+I+"_"+H+'" onClick="return false;" class="note_icon" title="Comment">&nbsp;</a>';C+='<input type="hidden" id="isREnd_'+I+"_"+H+'" value=""/>';
C+="</span>";C+='<span class="col9 row">';C+='<span id="delete_'+I+"_"+H+'" data-deg-reg-cnt="'+I+'" data-deg-reg="'+H+'" class="delete_row_icon closeDegReg deleteRow" style="margin-left:20px;">&nbsp;</span>';C+="</span>";C+='<div id="stdtCmnt_'+I+"_"+H+'" style="display:none;">';C+='<textarea id="stCmnt_'+I+"_"+H+'" class="note_text"></textarea>';
C+="</div>";C+='<div id="varCName_'+I+"_"+H+'" style="display:none;clear: both;">';C+='<input type="hidden" id="nameVariableFlag_'+I+"_"+H+'" value=""/>';C+='<span class="col1"><span class="colWidth" style="float: left;">&nbsp;</span></span><span class="col2"><span class="colWidth" style="float: left;">&nbsp;</span></span>';
C+='<span class="col3 row mrg" style="padding: 2px 0;">';C+='<input id="vCourseName_'+I+"_"+H+'" readonly="readonly" type="text" class="rightDiv fld colWidth" value="">';C+="</span>";C+="</div>";C+='		<div class="clear" >&nbsp;</div>';C+='		<div class="tt" id="tt_'+I+"_"+H+'" style="display:none;">';
C+="		<table> ";C+="  		<thead> ";C+="     		<tr> ";C+='        		<th class="tth6">S.No</th> ';C+='        		<th class="tth1">Segment</th> ';C+='           	<th class="tth2">Date & Timings</th> ';C+="      </tr> ";C+="  </thead> ";C+="		</table> ";C+='		<div class="timeTabDiv" id="timeTabDiv_'+I+"_"+H+'" > ';
C+='		<table class="timeTabDesc_'+I+"_"+H+'" id="timeTabDesc_'+I+"_"+H+'" > ';C+=' <tbody id="timeTabUI_'+I+"_"+H+'"> ';C+='  	<tr class="timeTabTr_'+I+"_"+H+'"> ';C+=' 		<td colspan="5"> No Time Table Available</td> ';C+="    </tr> ";C+="</tbody> ";C+=" </table> ";C+="</div> ";C+="		</div>";C+="	</div>";
return C;}function generateCombo(A){openHelpPopup({"title":"Running Courses","id":"cCd_"+A,"key":"COURSEREG","appKey":"AMS","field":"cCode","beforeCallBack":"chngCourseDep","afterCallBack":"chkSelCourse","electiveType":"eType_"+A,"studentId":studentId,"studentDegreeId":A.split("_")[1],"regTypeId":A.split("_")[2],"electiveTypeId":$("#eType_"+A).val(),"acadPeriodId":pId,"focusObj":{"cCode":"cCd_"+A,"courseId":"cId_"+A,"cName":"cDesc_"+A,"nvFlag":"nameVariableFlag_"+A,"rcId":"rcId_"+A,"coordId":"crdId_"+A,"coordName":"cCr_"+A,"locId":"locId_"+A,"locCd":"cLoc_"+A,"cCredits":"credits_"+A,"cCrd":"cCrd_"+A,"coordLocId":"rcCrLoc_"+A,"sType":"sType_"+A,"cMarks":"maxMarks_"+A,"courseSlotId":"courseSlotId_"+A},"clearFields":{"courseId":"#cId_"+A,"cName":"#cDesc_"+A,"nvFlag":"#nameVariableFlag_"+A,"rcId":"#rcId_"+A,"coordId":"#crdId_"+A,"coordName":"#cCr_"+A,"locId":"#locId_"+A,"locCd":"#cLoc_"+A,"cCredits":"#credits_"+A,"cCrd":"#cCrd_"+A,"coordLocId":"#rcCrLoc_"+A,"sType":"#sType_"+A,"cMarks":"#maxMarks_"+A,"courseSlotId":"#courseSlotId_"+A},"checkFields":{"studentId":"#studentId","studentDegreeId":"#stdntDeg_"+A,"regTypeId":"#stdntReg_"+A,"electiveTypeId":"#eType_"+A,"cCode":"#cCd_"+A},"extraParams":{"electiveType":"eType_"+A,"studentId":studentId,"studentDegreeId":A.split("_")[1],"regTypeId":A.split("_")[2],"electiveTypeId":$("#eType_"+A).val(),"acadPeriodId":pId}});
}function chngCourseDep(A){if($("#"+A.electiveType).val()==-1){return showErrorById(A.electiveType,"Please select elective");}else{A.extraParams.electiveTypeId=$("#"+A.electiveType).val();return A;}}function chkSelCourse(A,C){var B=C.split("_");if(A!==undefined&&cvFlgT==A.cvflg){$("#credits_"+B[1]+"_"+B[2]+"_"+B[3]).removeAttr("readonly");
}else{if(A!==undefined&&A.cvflg==cvFlgF){$("#credits_"+B[1]+"_"+B[2]+"_"+B[3]).attr("readonly","readonly");}}if(A!==undefined&&bYes==A.nvflag){$("#vCourseName_"+B[1]+"_"+B[2]+"_"+B[3]).removeAttr("readonly").addClass("preq");$("#varCName_"+B[1]+"_"+B[2]+"_"+B[3]).show();}else{if(A!==undefined&&A.nvflag==bNo){$("#varCName_"+B[1]+"_"+B[2]+"_"+B[3]).hide();
$("#vCourseName_"+B[1]+"_"+B[2]+"_"+B[3]).attr("readonly","readonly");$("#vCourseName_"+B[1]+"_"+B[2]+"_"+B[3]).val("");}}$("#cDesc_"+B[1]+"_"+B[2]+"_"+B[3]).attr("title",A.cname);$("#cCr_"+B[1]+"_"+B[2]+"_"+B[3]).attr("title",A.coordname);$("#cLoc_"+B[1]+"_"+B[2]+"_"+B[3]).attr("title",A.loccd);$("#credits_"+B[1]+"_"+B[2]+"_"+B[3]).attr("title",A.ccrd);
$("#sType_"+B[1]+"_"+B[2]+"_"+B[3]).attr("title",A.stdesc);$("#maxMarks_"+B[1]+"_"+B[2]+"_"+B[3]).attr("title",A.mscore);$("#cCd_"+B[1]+"_"+B[2]+"_"+B[3]).attr("data-rcid",A.rcid);getTimeTable(A.rcid,B[1]+"_"+B[2]+"_"+B[3]);enableTimeTable(B[1]+"_"+B[2]+"_"+B[3]);}function changeOnElectiveOccurred(B,C,A){$("#cCd_"+C+"_"+A).val("");
$("#cId_"+C+"_"+A).val("");$("#cDesc_"+C+"_"+A).val("");$("#rcId_"+C+"_"+A).val("");$("#crdId_"+C+"_"+A).val("");$("#cCr_"+C+"_"+A).val("");$("#locId_"+C+"_"+A).val("");$("#cLoc_"+C+"_"+A).val("");$("#credits_"+C+"_"+A).val("");$("#rcCrLoc_"+C+"_"+A).val("");$("#sType_"+C+"_"+A).val("");$("#maxMarks_"+C+"_"+A).val("");
$("#stCmnt_"+C+"_"+A).val("");$("#vCourseName_"+C+"_"+A).val("");$("#varCName_"+C+"_"+A).hide();}function openCommentPopup(E){var D=E.attr("id").split("_");var A={prevCommentAny:$.trim($("#stCmnt_"+D[1]+"_"+D[2]+"_"+D[3]).val())};statusComment=getCommentDiv(E,D[1]+"_"+D[2]+"_"+D[3],A);var B=commentOkCallBack;
var F=commentCancelCallBack;var C={"ok":B(E),"cancel":F(E),"formStr":statusComment,"width":325};openPopupForm(C,"300");}function getCommentDiv(D,B,A){var C="";C+='<div id="poupErrMsg"></div><div class="leftBlock" style="width:305px;"><div class="formDiv row">';C+='	<label for="stdtPopupComment_'+B+'" style="vertical-align:top;width:50px;" class="leftDiv"> Comments: </label>';
C+='	<textarea id="popupComment" name="popupComment" maxlen="150" class="rightDiv fld" autofocus style="width:180px;">'+A.prevCommentAny+"</textarea>";C+='	<div class="clear"></div>';C+='	<div id="popupCommentLimit" class="txtAreaLbl" >Maximum characters 150</div>';C+='</div></div><script>setMaxLimit("popupComment", "popupCommentLimit");<\/script>';
return C;}function closePopup(){$("#popupComment").val("");popupInd=false;$("#popUp").fadeOut();hideGlair();}function okCmtCallBack(){popupInd=false;$("#popUp").hide();hideGlair();}var commentOkCallBack=function(A){return function(B){jQuery.each(B,function(D,E){if(E.name=="popupComment"&&$.trim(E.value)==""){$("#poupErrMsg").addClass("popupErrorMsg");
$("#poupErrMsg").html("Please enter comment");$("#poupErrMsg").show();}else{var C=$("#popupComment").prev().attr("for").split("_");$("#stCmnt_"+C[1]+"_"+C[2]+"_"+C[3]).val($.trim($("#popupComment").val()));closePopup();}});};};var commentCancelCallBack=function(A){return function(B){closePopup();};};
function saveOrSubmitDetails(C){disableWithLoading();try{var B=buildAndValidateFormData(C);if(B){return saveCourseRegDtls(B,C);}else{return false;}}catch(A){enableAllButtons();if(A instanceof UserException){showErrorById(A.focusOn,A.message);}return false;}return true;}function buildAndValidateFormData(K){var F=[];
var E=[];var B="";var A=[];var D="";var J="";var L=[];var I={};var G=[];var H=1;formCourseArr=[];var C=[];$(".studentDegDtls").each(function(){B=$(this).data("degDtl");$(".studentReg"+B+"Dtls").each(function(){D=$(this).data("regType");J=B+"_"+D;if($(".stdtDegReg_"+J).length>0){$(".stdtDegReg_"+J).each(function(){var M=$(this).attr("id").split("_")[0];
F.push(M+"_"+J);formCourseArr.push($("#cId_"+M+"_"+J).val());L.push({"id":"eType_"+M+"_"+J,"required":true,"caption":"Elective Type","isNot":"-1"});L.push({"id":"cCd_"+M+"_"+J,"required":true,"caption":"Course Code"});L.push({"id":"cId_"+M+"_"+J,"required":true,"caption":"Course","type":"POSITIVEINTEGER"});
L.push({"id":"cDesc_"+M+"_"+J,"required":true,"caption":"Course Desc"});L.push({"id":"rcId_"+M+"_"+J,"required":true,"caption":"Running Course","type":"POSITIVEINTEGER"});L.push({"id":"cCr_"+M+"_"+J,"required":true,"caption":"Coordinator"});L.push({"id":"crdId_"+M+"_"+J,"required":true,"caption":"coordinator","type":"INTEGER"});
L.push({"id":"cLoc_"+M+"_"+J,"required":true,"caption":"Location"});L.push({"id":"locId_"+M+"_"+J,"required":true,"caption":"Location","type":"POSITIVEINTEGER"});L.push({"id":"credits_"+M+"_"+J,"required":true,"caption":"Credits","type":"FLOAT","format":"5,2","operator":"le","compareComponent":"#cCrd_"+M+"_"+J});
L.push({"id":"rcCrLoc_"+M+"_"+J,"required":true,"caption":"course coordinator location","type":"POSITIVEINTEGER"});L.push({"id":"maxMarks_"+M+"_"+J,"required":true,"caption":"MaxScore","type":"FLOAT"});if($("#cRegId_"+M+"_"+J).val()!=""&&$("#rTrDtlId_"+M+"_"+J).val()!=""){L.push({"id":"stCmnt_"+M+"_"+J,"caption":"Course Comments","maxLen":"150"});
}if(!$("#"+M+"_"+J+"_stdtReg").hasClass("dInd")&&$("#courseSlotId_"+M+"_"+J).val()!=""){C.push({"val":$("#courseSlotId_"+M+"_"+J).val(),"id":"courseSlotId_"+M+"_"+J,"courseCode":$("#cCd_"+M+"_"+J).val()});}I={"rTrDtlId":$.trim($("#rTrDtlId_"+M+"_"+J).val()),"cRegId":$.trim($("#cRegId_"+M+"_"+J).val()),"crV":$.trim($("#crV_"+M+"_"+J).val()),"crDt":$.trim($("#crDt_"+M+"_"+J).val()),"cId":$.trim($("#cId_"+M+"_"+J).val()),"eTypeId":$.trim($("#eType_"+M+"_"+J).val()),"rcId":$.trim($("#rcId_"+M+"_"+J).val()),"crdId":$.trim($("#crdId_"+M+"_"+J).val()),"locId":$.trim($("#locId_"+M+"_"+J).val()),"rcCrLoc":$.trim($("#rcCrLoc_"+M+"_"+J).val()),"credits":$.trim($("#credits_"+M+"_"+J).val()),"cCrd":$.trim($("#cCrd_"+M+"_"+J).val()),"regStatusId":$.trim($("#regStatusVal_"+M+"_"+J).val()),"stCmnt":$.trim($("#stCmnt_"+M+"_"+J).val()),"studentDegreeId":B,"regType":D,"dInd":$("#"+M+"_"+J+"_stdtReg").hasClass("dInd"),"id":M+"_"+J,"cCd":$.trim($("#cCd_"+M+"_"+J).val()),"courseSlotId":$.trim($("#courseSlotId_"+M+"_"+J).val())};
if($("#nameVariableFlag_"+M+"_"+J).val()==bYes&&!($("#"+M+"_"+J+"_stdtReg").hasClass("dInd"))){L.push({"id":"vCourseName_"+M+"_"+J,"required":true,"caption":"Course Title","maxLen":100});I.variableCourseName=$("#vCourseName_"+M+"_"+J).val();}E.push(I);if($("#cId_"+M+"_"+J).val()==""){H=0;}if(!$("#"+M+"_"+J+"_stdtReg").hasClass("dInd")&&$("#regStatusVal_"+M+"_"+J).val()!=pdSt&&$.inArray($("#cId_"+M+"_"+J).val(),G)===-1){G.push($("#cId_"+M+"_"+J).val());
}else{if(!$("#"+M+"_"+J+"_stdtReg").hasClass("dInd")&&$("#regStatusVal_"+M+"_"+J).val()!=pdSt&&H){throw new UserException("Duplicate course selected","cCd_"+M+"_"+J);}else{if($("#"+M+"_"+J+"_stdtReg").hasClass("dInd")){A.push($("#cId_"+M+"_"+J).val());}}}});}});});L.push({"id":"comments","caption":"Comments","maxLen":"150"});
if((F.length==0||(A.length==F.length))&&$.trim($("#comments").val())==""){throw new UserException("Please enter comments to save/submit","comments");}else{if(bindFormToButton(L)){return E;}else{enableAllButtons();E=[];return false;}}}function findDuplicateSlots(E){var B={};var A={};var C=0;for(var D=0;
D<E.length;D++){B=E[D];for(C=D+1;C<E.length;C++){A=E[C];if(B.val==A.val){return showMsg(duplicateMsg,A.id,{"courseCd1":B.courseCode,"courseCd2":A.courseCode});}}}return true;}function saveCourseRegDtls(B,A){var C={"courseRegDtls":JSON.stringify(B),"course":JSON.stringify(formCourseArr),"saved":A.attr("id")=="save"?false:true,"studentComments":$.trim($("#comments").val()),"regtId":$.trim($("#regtId").val()),"regtV":$.trim($("#regtV").val()),"regtS":$.trim($("#regtS").val()),"pId":$.trim($("#pId").val())};
callAjaxByObj({"url":"/courseReg/saveStudentReg","type":"POST","data":C,"resp":afterSuccessSaveStdntReg(),"error":afterFailureSaveStdntReg()});return false;}function afterSuccessSaveStdntReg(){return function(A){enableAllButtons();if(!A.success){return showErrorById("",A.message);}else{window.location.reload();
}};}function afterFailureSaveStdntReg(){return function(A){enableAllButtons();};}$(document).on("click",".time_tab_icon",function(){var B=$(this).attr("id").split("_")[1];B=B+"_"+$(this).attr("id").split("_")[2];B=B+"_"+$(this).attr("id").split("_")[3];var A=$("#cCd_"+B).attr("data-rcid");getTimeTable(A,B);
$("#tt_"+B).slideToggle();});function getTimeTable(A,B){callAjaxByObj({"url":"/courseReg/getStdntRngCrsTimeTableDtls","type":"POST","data":{"dataObj":JSON.stringify(prepareRunningIdObj(A))},"async":false,"resp":afterGettingTimeTab(B),"error":afterGettingTimeTabErr()});}function prepareRunningIdObj(A){var B={};
B.runningCourseIds=A;return B;}function afterGettingTimeTab(A){return function(E){$(".timeTabTr_"+A).remove();if(E==""){var B="";B+='  	<tr class="timeTabTr_'+A+'"> ';B+=' 		<td colspan="5"> No Time Table Available</td> ';B+="  	</tr> ";$("#timeTabUI_"+A).append(B);}else{var B="";var D={};for(var C=0;
C<E.length;C++){D=E[C];B+='  	<tr class="timeTabTr_'+A+'"> ';B+=' 		<td class="ttd6">'+(C+1)+"</td> ";B+=' 		<td class="ttd1">'+D.segName+"</td> ";B+=' 		<td class="ttd2" style="background-color: #FFF8DC; color : #8E1FAE" > <span>'+D.newFrmDt+"----</span><span>"+D.slotPeriodCdDays+"</span> </td> ";B+="    </tr> ";
}$("#timeTabUI_"+A).append(B);}};}function afterGettingTimeTabErr(){return function(A){};}function enableTimeTable(A){if($("#cCd_"+A).val()!=""&&$("#cCd_"+A).val()!=undefined){$("#timeTab_"+A).show();$(".ttHeader").show();}else{$("#timeTab_"+A).hide();$(".ttHeader").hide();$("#tt_"+A).hide();}}